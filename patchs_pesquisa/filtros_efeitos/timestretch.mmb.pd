#N canvas 42 22 1175 770 10;
#X obj 514 204 phasor~;
#X obj 688 246 +~ 0.5;
#X obj 688 268 wrap~;
#X obj 403 53 samplerate~;
#X obj 514 82 pack f f;
#X msg 514 104 \$2 \$1;
#X obj 514 126 /;
#X obj 514 150 sig~;
#X obj 559 57 r sample.rate;
#X obj 403 76 s sample.rate;
#X obj 445 447 *~ 1024;
#X obj 445 471 tabread4~ window.array;
#X obj 688 451 *~ 1024;
#X obj 688 475 tabread4~ window.array;
#X obj 140 645 phasor~;
#X obj 140 496 /;
#X obj 185 426 r sample.rate;
#X obj 140 518 sig~;
#X obj 140 613 *~ 0;
#X obj 532 337 edge~;
#X obj 532 389 snapshot~;
#X obj 140 715 send~ sample.pos;
#X obj 553 360 receive~ sample.pos;
#X obj 514 421 expr~ $v1*$f3+$f2;
#X obj 600 391 r grain.size;
#X obj 763 338 edge~;
#X obj 763 390 snapshot~;
#X obj 784 361 receive~ sample.pos;
#X obj 831 392 r grain.size;
#X obj 499 506 *~;
#X obj 514 445 tabread4~ sample.array;
#X obj 745 448 tabread4~ sample.array;
#X obj 730 509 *~;
#X obj 599 567 +~;
#X obj 599 702 dac~;
#X obj 161 588 r play;
#X obj 140 564 *~ 1;
#X obj 161 540 r speed;
#X obj 599 594 *~ 0.5;
#X obj 599 670 *~;
#X obj 668 640 line~;
#X msg 668 617 \$1 50;
#X obj 668 592 dbtorms;
#X obj 668 568 r level;
#X obj 140 452 pack f f;
#X msg 140 473 \$2 \$1;
#X obj 140 691 *~ 1;
#X obj 161 665 r sample.length;
#X obj 514 179 *~ 0;
#X obj 549 151 r play;
#X obj 532 309 expr~ $v1<.5;
#X obj 763 310 expr~ $v1<.5;
#X obj 514 20 r grain.size;
#X obj 140 400 r sample.length;
#X text 732 19 Time-stretching section;
#X text 734 262 <--offset for 180 out of sync phasor;
#X text 853 324 <--bang at end of ramp;
#X text 569 203 <--phasor loops at sample rate / grain size;
#X text 836 477 <--amplitude window;
#X text 912 361 <--get sample position;
#X text 90 735 this all tracks the sample position at whatever speed
;
#X text 710 39 The sample.array is being played back using two overlapping
grains \, similar to the G09.pitchshift example. The grains are being
played back at normal speed \, but their start times are determined
by a variable-speed phasor~ corresponding to the length of the soundfile.
The window.array is the envelope for the grains.;
#X obj 745 421 expr~ $v1*$f3+$f2;
#X text 868 420 <--play grain size at normal speed starting;
#X text 892 434 at sample position;
#X obj 11 9 cnv 15 320 370 empty empty empty 20 12 0 14 -16662 -66577
0;
#X obj 14 12 cnv 15 314 364 empty empty empty 20 12 0 14 -262144 -66577
0;
#N canvas 0 22 314 564 window.shape 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array window.array 1024 float 1;
#A 0 8.59499e-06 0.00307649 0.00614438 0.00921227 0.0122802 0.0153476
0.018415 0.0214825 0.0245499 0.0276164 0.0306829 0.0337494 0.0368159
0.039881 0.0429462 0.0460113 0.0490764 0.0521397 0.0552029 0.0582662
0.0613295 0.0643905 0.0674514 0.0705124 0.0735733 0.0766315 0.0796897
0.0827479 0.0858061 0.0888611 0.091916 0.094971 0.098026 0.101077 0.104129
0.10718 0.110231 0.113278 0.116325 0.119372 0.12242 0.125462 0.128505
0.131547 0.13459 0.137627 0.140664 0.143702 0.146739 0.149771 0.152803
0.155835 0.158867 0.161893 0.164919 0.167945 0.170971 0.17399 0.17701
0.180029 0.183049 0.186061 0.189074 0.192087 0.195099 0.198105 0.20111
0.204115 0.20712 0.210118 0.213115 0.216113 0.21911 0.222099 0.225089
0.228078 0.231067 0.234048 0.237028 0.240009 0.242989 0.245961 0.248932
0.251903 0.254875 0.257836 0.260798 0.26376 0.266722 0.269674 0.272625
0.275577 0.278529 0.28147 0.284411 0.287352 0.290294 0.293224 0.296154
0.299085 0.302015 0.304934 0.307853 0.310772 0.313691 0.316598 0.319505
0.322412 0.325319 0.328214 0.331109 0.334004 0.336899 0.339781 0.342663
0.345545 0.348428 0.351297 0.354166 0.357035 0.359904 0.36276 0.365615
0.368471 0.371326 0.374168 0.377009 0.379851 0.382692 0.38552 0.388347
0.391174 0.394001 0.396813 0.399626 0.402438 0.40525 0.408047 0.410844
0.413641 0.416438 0.41922 0.422001 0.424783 0.427564 0.430329 0.433095
0.43586 0.438625 0.441374 0.444123 0.446871 0.44962 0.452352 0.455084
0.457816 0.460548 0.463262 0.465977 0.468691 0.471406 0.474102 0.476799
0.479496 0.482193 0.484871 0.48755 0.490228 0.492907 0.495567 0.498227
0.500887 0.503547 0.506188 0.508829 0.51147 0.514111 0.516733 0.519355
0.521977 0.524598 0.5272 0.529802 0.532404 0.535006 0.537588 0.54017
0.542752 0.545334 0.547895 0.550456 0.553017 0.555579 0.558119 0.56066
0.5632 0.56574 0.568259 0.570778 0.573298 0.575817 0.578314 0.580811
0.583309 0.585806 0.588282 0.590757 0.593232 0.595708 0.598161 0.600613
0.603066 0.605519 0.607949 0.61038 0.61281 0.61524 0.617647 0.620054
0.622461 0.624868 0.627251 0.629635 0.632018 0.634401 0.636761 0.639121
0.64148 0.64384 0.646175 0.64851 0.650846 0.653181 0.655492 0.657802
0.660113 0.662424 0.66471 0.666995 0.669281 0.671567 0.673827 0.676088
0.678348 0.680609 0.682844 0.685079 0.687313 0.689548 0.691757 0.693966
0.696175 0.698384 0.700567 0.702749 0.704932 0.707114 0.70927 0.711426
0.713582 0.715738 0.717867 0.719997 0.722126 0.724255 0.726356 0.728458
0.73056 0.732662 0.734736 0.73681 0.738884 0.740959 0.743005 0.745051
0.747097 0.749144 0.751162 0.75318 0.755198 0.757216 0.759206 0.761195
0.763185 0.765174 0.767135 0.769096 0.771057 0.773017 0.774949 0.776881
0.778813 0.780744 0.782646 0.784549 0.786451 0.788353 0.790226 0.792099
0.793971 0.795844 0.797686 0.799529 0.801372 0.803214 0.805027 0.806839
0.808651 0.810464 0.812246 0.814028 0.815809 0.817591 0.819342 0.821094
0.822845 0.824596 0.826316 0.828036 0.829756 0.831476 0.833165 0.834853
0.836542 0.838231 0.839888 0.841545 0.843203 0.84486 0.846485 0.84811
0.849736 0.851361 0.852955 0.854548 0.856141 0.857735 0.859296 0.860857
0.862418 0.863979 0.865507 0.867036 0.868564 0.870093 0.871588 0.873084
0.87458 0.876076 0.877538 0.879001 0.880464 0.881927 0.883356 0.884786
0.886215 0.887645 0.889041 0.890437 0.891833 0.89323 0.894592 0.895955
0.897317 0.89868 0.900008 0.901337 0.902666 0.903994 0.905289 0.906584
0.907878 0.909173 0.910433 0.911694 0.912954 0.914215 0.915441 0.916667
0.917893 0.919119 0.92031 0.921501 0.922693 0.923884 0.925041 0.926197
0.927354 0.928511 0.929632 0.930754 0.931875 0.932997 0.934084 0.93517
0.936257 0.937343 0.938394 0.939446 0.940497 0.941548 0.942564 0.94358
0.944595 0.945611 0.946591 0.947572 0.948552 0.949532 0.950476 0.951421
0.952365 0.95331 0.954218 0.955127 0.956035 0.956944 0.957816 0.958689
0.959561 0.960434 0.96127 0.962107 0.962943 0.963779 0.964579 0.965379
0.96618 0.96698 0.967743 0.968507 0.969271 0.970034 0.970761 0.971489
0.972216 0.972943 0.973633 0.974324 0.975014 0.975705 0.976359 0.977012
0.977666 0.97832 0.978937 0.979554 0.980171 0.980788 0.981368 0.981948
0.982528 0.983108 0.983651 0.984194 0.984737 0.98528 0.985786 0.986292
0.986798 0.987303 0.987772 0.988241 0.98871 0.989178 0.98961 0.990041
0.990473 0.990904 0.991299 0.991693 0.992087 0.992481 0.992838 0.993195
0.993552 0.993908 0.994228 0.994547 0.994867 0.995186 0.995468 0.99575
0.996032 0.996314 0.996558 0.996803 0.997047 0.997291 0.997498 0.997705
0.997912 0.998119 0.998288 0.998457 0.998627 0.998796 0.998928 0.999059
0.999191 0.999323 0.999417 0.999511 0.999605 0.999699 0.999756 0.999812
0.999868 0.999925 0.999944 0.999962 0.999981 1 0.999981 0.999962 0.999944
0.999925 0.999868 0.999812 0.999755 0.999699 0.999605 0.999511 0.999417
0.999322 0.999191 0.999059 0.998927 0.998795 0.998626 0.998457 0.998287
0.998118 0.997911 0.997704 0.997497 0.99729 0.997046 0.996801 0.996557
0.996313 0.996031 0.995749 0.995467 0.995185 0.994865 0.994546 0.994226
0.993907 0.99355 0.993193 0.992836 0.99248 0.992085 0.991691 0.991297
0.990903 0.990471 0.99004 0.989608 0.989177 0.988708 0.988239 0.98777
0.987301 0.986795 0.98629 0.985784 0.985278 0.984735 0.984192 0.983649
0.983106 0.982525 0.981945 0.981365 0.980785 0.980168 0.979551 0.978934
0.978317 0.977664 0.97701 0.976356 0.975702 0.975012 0.974321 0.973631
0.97294 0.972213 0.971486 0.970758 0.970031 0.969268 0.968504 0.96774
0.966977 0.966176 0.965376 0.964576 0.963776 0.96294 0.962103 0.961267
0.960431 0.959558 0.958686 0.957813 0.95694 0.956032 0.955123 0.954215
0.953306 0.952362 0.951417 0.950473 0.949528 0.948548 0.947568 0.946588
0.945607 0.944592 0.943576 0.94256 0.941544 0.940493 0.939442 0.93839
0.937339 0.936253 0.935166 0.93408 0.932993 0.931871 0.93075 0.929628
0.928506 0.92735 0.926193 0.925036 0.92388 0.922688 0.921497 0.920305
0.919114 0.917888 0.916662 0.915436 0.91421 0.91295 0.911689 0.910429
0.909168 0.907874 0.906579 0.905284 0.90399 0.902661 0.901332 0.900003
0.898675 0.897312 0.89595 0.894587 0.893225 0.891828 0.890432 0.889036
0.88764 0.88621 0.884781 0.883351 0.881922 0.880459 0.878996 0.877533
0.87607 0.874575 0.873079 0.871583 0.870087 0.868559 0.86703 0.865502
0.863973 0.862412 0.860851 0.85929 0.857729 0.856136 0.854542 0.852949
0.851356 0.84973 0.848105 0.846479 0.844854 0.843197 0.84154 0.839882
0.838225 0.836536 0.834848 0.833159 0.83147 0.82975 0.82803 0.82631
0.82459 0.822839 0.821088 0.819336 0.817585 0.815803 0.814022 0.81224
0.810458 0.808645 0.806833 0.805021 0.803208 0.801365 0.799523 0.79768
0.795838 0.793965 0.792092 0.79022 0.788347 0.786445 0.784542 0.78264
0.780738 0.778806 0.776875 0.774943 0.773011 0.77105 0.76909 0.767129
0.765168 0.763178 0.761189 0.759199 0.75721 0.755192 0.753173 0.751155
0.749137 0.747091 0.745045 0.742998 0.740952 0.738878 0.736804 0.734729
0.732655 0.730553 0.728451 0.72635 0.724248 0.722119 0.71999 0.717861
0.715732 0.713576 0.71142 0.709264 0.707108 0.704925 0.702742 0.70056
0.698377 0.696168 0.693959 0.69175 0.689542 0.687307 0.685072 0.682837
0.680602 0.678342 0.676081 0.67382 0.67156 0.669274 0.666988 0.664703
0.662417 0.660106 0.657795 0.655485 0.653174 0.650839 0.648503 0.646168
0.643833 0.641473 0.639114 0.636754 0.634394 0.632011 0.629628 0.627244
0.624861 0.622454 0.620047 0.61764 0.615233 0.612803 0.610373 0.607942
0.605512 0.603059 0.600606 0.598153 0.595701 0.593225 0.59075 0.588274
0.585799 0.583302 0.580804 0.578307 0.57581 0.57329 0.570771 0.568252
0.565733 0.563193 0.560652 0.558112 0.555572 0.55301 0.550449 0.547888
0.545326 0.542745 0.540163 0.537581 0.534999 0.532397 0.529795 0.527193
0.524591 0.521969 0.519348 0.516726 0.514104 0.511463 0.508822 0.506181
0.50354 0.50088 0.49822 0.49556 0.4929 0.490221 0.487542 0.484864 0.482185
0.479488 0.476792 0.474095 0.471398 0.468684 0.465969 0.463255 0.46054
0.457808 0.455076 0.452344 0.449613 0.446864 0.444115 0.441366 0.438617
0.435852 0.433087 0.430322 0.427556 0.424775 0.421994 0.419212 0.416431
0.413634 0.410837 0.40804 0.405242 0.40243 0.399618 0.396805 0.393993
0.391166 0.388339 0.385512 0.382685 0.379843 0.377001 0.37416 0.371318
0.368463 0.365607 0.362752 0.359896 0.357027 0.354158 0.351289 0.34842
0.345537 0.342655 0.339773 0.336891 0.333996 0.331101 0.328206 0.325311
0.322404 0.319497 0.31659 0.313683 0.310764 0.307845 0.304926 0.302007
0.299077 0.296146 0.293216 0.290286 0.287344 0.284403 0.281462 0.278521
0.275569 0.272617 0.269665 0.266714 0.263752 0.26079 0.257828 0.254866
0.251895 0.248924 0.245952 0.242981 0.24 0.23702 0.234039 0.231059
0.22807 0.22508 0.222091 0.219102 0.216104 0.213107 0.21011 0.207112
0.204107 0.201101 0.198096 0.195091 0.192078 0.189066 0.186053 0.18304
0.180021 0.177001 0.173982 0.170962 0.167937 0.164911 0.161885 0.158859
0.155827 0.152795 0.149763 0.146731 0.143694 0.140656 0.137619 0.134581
0.131539 0.128496 0.125454 0.122411 0.119364 0.116317 0.11327 0.110223
0.107171 0.10412 0.101069 0.0980175 0.0949625 0.0919076 0.0888526 0.0857976
0.0827394 0.0796812 0.076623;
#A 1000 0.0735648 0.0705039 0.0674429 0.0643819 0.061321 0.0582577
0.0551944 0.0521312 0.0490679 0.0460028 0.0429376 0.0398725 0.0368074
0.0337409 0.0306744 0.0276079 0.0245414 0.0214739 0.0184065 0.0153391
0.0122716 0.00920376 0.00613586 0.00306797;
#X coords 0 1 1023 0 200 140 1;
#X restore 32 39 graph;
#X obj 44 519 tabwrite~ window.array;
#X obj 44 415 line~;
#X msg 28 381 -0.25;
#X obj 136 304 r sample.rate;
#X obj 67 381 pack 0.25 43;
#X obj 44 442 cos~;
#X obj 44 467 *~ 1;
#X obj 44 492 clip~ 0 1;
#X obj 35 180 hsl 195 15 100 125 0 0 window.shape window.shape.r window.shape
2 8 0 10 -262144 -1 -1 0 1;
#X obj 32 331 t b b b f;
#X obj 133 337 expr 1024/($f1/1000);
#X obj 39 247 dbtorms;
#X obj 37 218 speedlim 15;
#X connect 2 0 6 0;
#X connect 3 0 2 0;
#X connect 4 0 11 0;
#X connect 5 0 2 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 9 0 13 0;
#X connect 10 0 5 0;
#X connect 10 1 3 0;
#X connect 10 2 1 0;
#X connect 10 3 7 1;
#X connect 11 0 5 1;
#X connect 12 0 10 0;
#X connect 13 0 12 0;
#X coords 0 -1 1 1 204 174 2 30 23;
#X restore 27 193 pd window.shape;
#X obj 244 35 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 244 55 s play;
#X floatatom 244 86 5 0 0 0 - - -;
#X obj 244 143 s speed;
#X obj 244 202 s level;
#X floatatom 244 175 5 0 0 0 - - -;
#N canvas 0 22 652 278 sample 0;
#X obj 490 94 r sample.length;
#X msg 490 115 range 0 \$1;
#X obj 490 188 s playhead;
#X obj 426 94 metro 100;
#X obj 412 121 snapshot~;
#X msg 412 148 set \$1;
#X obj 412 34 receive~ sample.pos;
#X obj 426 66 r play;
#N canvas 0 22 450 300 (subpatch) 0;
#X array sample.array 66150 float 2;
#X coords 0 1 66150 -1 200 140 1;
#X restore 30 27 graph;
#X obj 33 27 hsl 195 140 0 66150 0 0 empty playhead empty -2 -8 0 10
-262144 -1 -1 0 1;
#X obj 128 12 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 247 186 read -resize \$1 sample.array;
#X obj 247 162 openpanel;
#X obj 247 209 soundfiler;
#X obj 247 234 s sample.length;
#X text 143 11 load sample;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 4 0;
#X connect 7 0 3 0;
#X connect 10 0 12 0;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 14 0;
#X coords 0 -1 1 1 204 158 2 28 11;
#X restore 26 26 pd sample;
#X floatatom 244 232 5 0 0 0 - - -;
#X obj 244 259 s grain.size;
#X obj 244 112 / 100;
#X text 279 86 %;
#X obj 341 21 loadbang;
#X msg 341 52 100;
#X msg 341 132 93;
#X msg 341 190 2096;
#X text 1003 623 .mmb;
#X connect 0 0 1 0;
#X connect 0 0 10 0;
#X connect 0 0 23 0;
#X connect 0 0 50 0;
#X connect 1 0 2 0;
#X connect 2 0 12 0;
#X connect 2 0 51 0;
#X connect 2 0 62 0;
#X connect 3 0 9 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 48 0;
#X connect 8 0 4 1;
#X connect 10 0 11 0;
#X connect 11 0 29 0;
#X connect 12 0 13 0;
#X connect 13 0 32 0;
#X connect 14 0 46 0;
#X connect 15 0 17 0;
#X connect 16 0 44 1;
#X connect 17 0 36 0;
#X connect 18 0 14 0;
#X connect 19 0 20 0;
#X connect 20 0 23 1;
#X connect 22 0 20 0;
#X connect 23 0 30 0;
#X connect 24 0 23 2;
#X connect 25 0 26 0;
#X connect 26 0 62 1;
#X connect 27 0 26 0;
#X connect 28 0 62 2;
#X connect 29 0 33 0;
#X connect 30 0 29 1;
#X connect 31 0 32 1;
#X connect 32 0 33 1;
#X connect 33 0 38 0;
#X connect 35 0 18 1;
#X connect 36 0 18 0;
#X connect 37 0 36 1;
#X connect 38 0 39 0;
#X connect 39 0 34 0;
#X connect 39 0 34 1;
#X connect 40 0 39 1;
#X connect 41 0 40 0;
#X connect 42 0 41 0;
#X connect 43 0 42 0;
#X connect 44 0 45 0;
#X connect 45 0 15 0;
#X connect 46 0 21 0;
#X connect 47 0 46 1;
#X connect 48 0 0 0;
#X connect 49 0 48 1;
#X connect 50 0 19 0;
#X connect 51 0 25 0;
#X connect 52 0 4 0;
#X connect 53 0 44 0;
#X connect 62 0 31 0;
#X connect 68 0 69 0;
#X connect 70 0 77 0;
#X connect 73 0 72 0;
#X connect 75 0 76 0;
#X connect 77 0 71 0;
#X connect 79 0 80 0;
#X connect 79 0 81 0;
#X connect 79 0 82 0;
#X connect 79 0 3 0;
#X connect 80 0 70 0;
#X connect 81 0 73 0;
#X connect 82 0 75 0;
